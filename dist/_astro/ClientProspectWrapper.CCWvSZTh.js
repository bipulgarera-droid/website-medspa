import{j as o,N as f,F as h}from"./Footer.B_lzIBCQ.js";import{r as a}from"./index.CVf8TyFT.js";const I="https://fjbowxwqaegvpjyinnsa.supabase.co",p="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqYm93eHdxYWVndnBqeWlubnNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwODc3NDUsImV4cCI6MjA3OTY2Mzc0NX0.FOPlfwF7kHhwSPhW1nlxeQ9TNBmkztEd2sQFYQ7C-SI",b=({children:m})=>{const[e,d]=a.useState(void 0),[c,u]=a.useState(void 0),[w,l]=a.useState(!0);return a.useEffect(()=>{if(typeof window<"u"){const n=new URLSearchParams(window.location.search).get("preview");n?(u(n),(async()=>{try{const s=await fetch(`${I}/rest/v1/personalized_previews?slug=eq.${encodeURIComponent(n)}&select=business_name,logo_url,contact_info`,{headers:{apikey:p,Authorization:`Bearer ${p}`}});if(s.ok){const t=await s.json();if(t&&t.length>0){const i=t[0],r=i.contact_info||{};d({businessName:i.business_name,logoUrl:i.logo_url,phone:r.phone,email:r.email,address:r.address})}}}catch(s){console.error(s)}finally{l(!1)}})()):l(!1)}},[]),o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsx(f,{onOpenBooking:()=>{},businessName:e?.businessName,logoUrl:e?.logoUrl,slug:c}),o.jsx("main",{className:"flex-grow",children:m}),o.jsx(h,{businessName:e?.businessName,phone:e?.phone,email:e?.email,address:e?.address,slug:c})]})};export{b as default};
